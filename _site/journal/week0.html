<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=22a0966ee6f51694bd0b10adaba3b17479c76404" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The Terraform Beginner Bootcamp | Cloud Express</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="The Terraform Beginner Bootcamp" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your Perfect Starting Point To The Cloud with Yaya Legacy." />
<meta property="og:description" content="Your Perfect Starting Point To The Cloud with Yaya Legacy." />
<link rel="canonical" href="http://localhost:4000/journal/week0.html" />
<meta property="og:url" content="http://localhost:4000/journal/week0.html" />
<meta property="og:site_name" content="Cloud Express" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The Terraform Beginner Bootcamp" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your Perfect Starting Point To The Cloud with Yaya Legacy.","headline":"The Terraform Beginner Bootcamp","url":"http://localhost:4000/journal/week0.html"}</script>
<!-- End Jekyll SEO tag -->


    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://localhost:4000/">
          <h1>Cloud Express</h1>
        </a>
        <h2>Your Perfect Starting Point To The Cloud with Yaya Legacy.</h2>
        
          <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023" class="button"><small>View project on</small> GitHub</a>
        
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1 id="the-terraform-beginner-bootcamp">The Terraform Beginner Bootcamp</h1>

<p>Welcome to space, and I genuinely hope you discover something of value here—no doubt.</p>

<blockquote>
  <p><a href="/">Go Back.</a></p>
</blockquote>

<p>To make the most of the following architecture, I strongly encourage you to follow the designated numerical branching in <a href="https://raw.githubusercontent.com/yaya2devops/terraform-beginner-bootcamp-2023/1-semantic-versioning/w0-branches.png">the given order</a>.</p>

<p><img src="/assets/1.0.0/week-0-diagram.png" alt="Rounded Week Zero Diaram" /></p>

<blockquote>
  <p>Starting with this one!</p>
</blockquote>

<h3 id="week-minus-one-and-paving-the-way">Week Minus One and Paving the Way</h3>

<p>It’s essential to note that the bootcamp did not start at this stage. <br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>📂 terraform-beginner-bootcamp-2023
  ├─ 📂 introduction
  ├─ 📂 week0-bprep
  ├─ 📂 week0-pprew
  ├─ 📂 week1-building
  ├─ 📂 week2-connecting
  ├─ 📂 week3-catchup
  └─ 📂 week4-the-end
</code></pre></div></div>
<p>We had a preceding phase known as the “Bootcamp Prep Week” prior to Week 0.</p>

<p>Tasks like signing in or up for multiple platforms and becoming familiar with basic capabilities;</p>

<ol>
  <li><strong>Understanding the Role</strong>: Clarified the expectations and responsibilities of a Cloud Engineer for the upcoming project.</li>
  <li><strong>Template Adoption</strong>: Implemented the ExamPro initial template for project.</li>
  <li><strong>Access to Discord</strong>: Successfully gained access to the Discord communication platform.</li>
  <li><strong>Effective Questioning Skills</strong>: Learned and aAcquired the skill of asking pertinent questions.</li>
  <li><strong>Markdown Mastery</strong>: Demonstrated more proficiency in Markdown for creating well-structured developer content.</li>
  <li><strong>Git and GitHub Proficiency</strong>: Strengthened knowledge and skills in Git and GitHub, essential for version control and collaborative coding.</li>
  <li><strong>Git Graph Use</strong>: Used Git Graph for visualizing and managing the project when branching, and tagging.</li>
  <li><strong>Terraform Cloud Familiarity</strong>: Initiated the journey with Terraform Cloud for our IaC.</li>
  <li><strong>Jumpad Registration</strong>: Signed up for Jumpad, the local alternative for Gitpod, codespaces or any.</li>
</ol>

<h2 id="table-of-contents">Table Of Contents</h2>
<ul>
  <li><a href="#the-terraform-beginner-bootcamp">The Terraform Mastery Journey</a></li>
  <li><a href="#streamlining-terraform-cli-setup">Simplifying Terraform CLI Configuration</a>
    <ul>
      <li><a href="#automate-the-script">Automating CLI Configuration</a></li>
      <li><a href="#linux-permissions">Managing Linux Permissions</a></li>
      <li><a href="#considerations">Important Considerations</a></li>
    </ul>
  </li>
  <li><a href="#effective-use-of-environment-variables">Harnessing the Power of Environment Variables</a>
    <ul>
      <li><a href="#listing-environment-variables">Listing Your Environment Variables</a></li>
      <li><a href="#managing-workspace-in-gitpod">Efficient Workspace Management in Gitpod</a></li>
      <li><a href="#understanding-gitpod-provided-environment-variables">Understanding Gitpod-Provided Environment Variables</a></li>
      <li><a href="#assigning-environment-variables-in-bash">Assigning Environment Variables in Bash</a></li>
      <li><a href="#create-dotenv">Creating a .env File</a></li>
      <li><a href="#installation-of-aws-cli-for-quick-interaction">Installing AWS CLI for Quick Interaction</a></li>
      <li><a href="#verifying-your-aws-cli-configuration">Verifying Your AWS CLI Configuration</a></li>
      <li><a href="#resolving-the-unauthenticated-issue">Resolving the Unauthenticated Issue</a></li>
      <li><a href="#3-aws-iam-user-configuration">Configuring AWS IAM Users</a>
        <ul>
          <li><a href="#making-environment-variables-persistent-in-gitpod">Making Environment Variables Persistent in Gitpod</a></li>
          <li><a href="#--security-note--do-not-leave-credentials-in--envsample---">Security Note: Protect Your Credentials</a></li>
          <li><a href="#verify-aws-cli-authentication">Verifying AWS CLI Authentication</a></li>
        </ul>
      </li>
      <li><a href="#refining-aws-cli-script">Optimizing Your AWS CLI Script</a>
        <ul>
          <li><a href="#1-handling-existing-aws-cli-components">Step 1: Handling Existing AWS CLI Components</a></li>
          <li><a href="#2-assign-env-vars">Step 2: Assigning Environment Variables</a></li>
          <li><a href="#3-gpt-is-average">Step 3: Leveraging GPT for Efficiency</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#terraform-basics">Unlocking Terraform’s Essentials</a>
    <ul>
      <li><a href="#calling-a-provider-from-registry">Accessing a Provider From the Registry</a>
        <ul>
          <li><a href="#provider-and-resource-configuration">Provider and Resource Configuration</a></li>
          <li><a href="#expanding-resources">Expanding Your Resource Set</a></li>
          <li><a href="#add-outputs">Adding Outputs for Clarity</a></li>
          <li><a href="#pre-verify">Pre-Verification Checks</a></li>
        </ul>
      </li>
      <li><a href="#terraform-workflow">Mastering the Terraform Workflow</a>
        <ul>
          <li><a href="#initialization">Initialization</a></li>
          <li><a href="#planning">Planning Your Infrastructure</a></li>
          <li><a href="#apply">Applying Your Plan</a></li>
          <li><a href="#output-check">Checking Outputs</a></li>
          <li><a href="#important-links-to-empower-you">Essential Links for Empowerment</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#provision-s3-using-terraform">Provisioning S3 Buckets with Terraform</a>
    <ul>
      <li><a href="#try-bucketops">Exploring BucketOps</a></li>
      <li><a href="#prerequisites">Prerequisites for Success</a></li>
      <li><a href="#create-an-s3-bucket-with-terraform">Creating an S3 Bucket Using Terraform</a>
        <ul>
          <li><a href="#searching-for-s3-in-terraform-registry">Searching for S3 in Terraform Registry</a></li>
          <li><a href="#define-the-terraform-resource">Defining the Terraform Resource</a></li>
          <li><a href="#configure-aws-provider">Configuring the AWS Provider</a></li>
          <li><a href="#initialize-and-plan">Initializing and Planning</a></li>
          <li><a href="#fixing-bucket-naming-issue">Resolving Bucket Naming Issues</a></li>
          <li><a href="#re-run-terraform-plan">Re-Running Terraform Plan</a></li>
          <li><a href="#terraform-apply">Applying Your Terraform Plan</a></li>
          <li><a href="#double-checking-terraform-state">Double-Checking Terraform State</a></li>
          <li><a href="#destroying-the-bucket">Destroying the Bucket</a>
            <ul>
              <li><a href="#security-reminder">Security Reminder</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#migrate-to-terraform-cloud">Transitioning to Terraform Cloud</a>
    <ul>
      <li><a href="#prerequisites-1">Prerequisites for Cloud Migration</a></li>
      <li><a href="#why-use-remote-state-storage-">The Benefits of Remote State Storage</a></li>
      <li><a href="#getting-started">Getting Started with Terraform Cloud</a>
        <ul>
          <li><a href="#organizations--projects--and-workspaces-">Understanding Organizations, Projects, and Workspaces</a></li>
        </ul>
      </li>
      <li><a href="#configure-workspace-settings">Configuring Workspace Settings</a></li>
      <li><a href="#create-a-project">Creating a Project in Terraform Cloud</a>
        <ul>
          <li><a href="#create-your-real-workspace">Setting Up Your Real Workspace</a></li>
        </ul>
      </li>
      <li><a href="#code-the-cloud-block">Coding in the Cloud</a>
        <ul>
          <li><a href="#resolved--configure-tf-cloud-with-gitpod--token-">RESOLVED: Configuring TF Cloud with Gitpod (Token)</a></li>
          <li><a href="#simple-test">Running Simple Tests</a></li>
          <li><a href="#-init--is-now-different">Changes in the ‘init’ Process</a></li>
          <li><a href="#potential-actions">Exploring Potential Actions</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#gitpod-terraform-cloud-authentication">Gitpod Terraform Cloud Authentication</a>
    <ul>
      <li><a href="#design-the-bash-script">Designing the Bash Script</a></li>
      <li><a href="#get-the-token-from-terraform-cloud">Fetching Your Token from Terraform Cloud</a></li>
      <li><a href="#automating-terraform-cloud-authentication">Automating Terraform Cloud Authentication</a></li>
    </ul>
  </li>
  <li><a href="#a-terraformer--tf--alias">Creating a Terraformer Alias</a>
    <ul>
      <li><a href="#section-1--manual-alias-setup">Section 1: Manual Alias Setup</a></li>
      <li><a href="#section-2--automating-alias-setup-with-a-bash-script">Section 2: Automated Alias Setup with a Bash Script</a></li>
      <li><a href="#section-3--using-the-alias-in-gitpod">Section 3: Utilizing the Alias in Gitpod</a></li>
    </ul>
  </li>
</ul>

<h2 id="week-zero-is-the-way--semver">Week Zero Is The Way — <a href="https://semver.org/">SemVer</a></h2>

<p>Week zero kicked off with a focus on more on branching, ticket management, and tagging, all in alignment with semantic versioning.</p>

<p>Semantic Versioning is a scheme for software that helps developers convey meaningful information about the changes in their code lets say e.g.</p>

<table>
  <thead>
    <tr>
      <th>Version</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1.0.0</td>
      <td>Initial release</td>
    </tr>
    <tr>
      <td>1.1.0</td>
      <td>Added new features, backward-compatible</td>
    </tr>
    <tr>
      <td>1.1.1</td>
      <td>Bug fix, backward-compatible</td>
    </tr>
    <tr>
      <td>2.0.0</td>
      <td>Incompatible changes, significant upgrade</td>
    </tr>
    <tr>
      <td>2.0.1</td>
      <td>Bug fix, backward-compatible</td>
    </tr>
    <tr>
      <td>2.1.0</td>
      <td>Added new features, backward-compatible</td>
    </tr>
    <tr>
      <td>3.0.0-alpha.1</td>
      <td>Pre-release version, not stable for production</td>
    </tr>
    <tr>
      <td>3.0.0-beta.1</td>
      <td>Pre-release version, for testing and feedback</td>
    </tr>
    <tr>
      <td>3.0.0</td>
      <td>Stable release, backward-compatible</td>
    </tr>
  </tbody>
</table>

<p>To implement SemVer properly in Git, you should follow these guidelines:</p>

<ol>
  <li>Set Up a Repository: If you don’t already have a Git repository for your project, create one by initing the .git dir
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Define Your Version Number</strong>: Start by defining your initial version number. SemVer follows the format <code class="language-plaintext highlighter-rouge">MAJOR.MINOR.PATCH</code>, where:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">MAJOR</code> is incremented for significant, backward-incompatible changes.</li>
      <li><code class="language-plaintext highlighter-rouge">MINOR</code> is incremented for backward-compatible new features or improvements.</li>
      <li><code class="language-plaintext highlighter-rouge">PATCH</code> is incremented for backward-compatible bug fixes.</li>
    </ul>
  </li>
</ol>

<p>For example, if your project is at version 1.0.0, you might start with:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git tag 1.0.0
</code></pre></div></div>
<ol>
  <li><strong>Commit Your Changes</strong>: Commit your changes as usual. Make sure that each commit message is descriptive and follows a conventional format, which includes a summary and, if needed, a detailed description.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit <span class="nt">-m</span> <span class="s2">"feat: Add new feature X"</span>
git commit <span class="nt">-m</span> <span class="s2">"fix: Fix issue Y"</span>
git commit <span class="nt">-m</span> <span class="s2">"chore: Update dependencies"</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Bump Version Numbers</strong>: When you’re ready to release a new version, update the version number accordingly in your project. For example, if you’re releasing a minor version, update the <code class="language-plaintext highlighter-rouge">MINOR</code> number:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git tag 1.1.0
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Write a Changelog</strong>: Create a changelog that details the changes in this release, including new features, bug fixes, and any other noteworthy items. This helps users understand what has changed between versions.</p>
  </li>
  <li><strong>Push to Git</strong>: Push your changes and tags to your Git repository:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push origin master <span class="nt">--tags</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Release Workflow</strong>: You can implement a release workflow that automates the process of updating the version number and creating a changelog. Various tools and scripts are available to help with this, such as standard-version, semantic-release, or your custom scripts.</li>
</ol>

<p><strong>standard-version:</strong> A popular tool for automating versioning and changelog generation. You can install it via npm:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> standard-version
</code></pre></div></div>
<p>Then, you can run it after your changes are ready for release:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>standard-version
</code></pre></div></div>

<p><strong>semantic-release:</strong> A more comprehensive tool that automates the entire release process, including versioning, changelog generation, and publishing to package registries.</p>

<ol>
  <li><strong>Publish Your Release</strong>: If your project is a library or package, you may want to publish it to a package registry like npm, PyPI, or others.</li>
</ol>

<p>If your code is already on GitHub, simply push it to your remote.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push --tags
</code></pre></div></div>

<p>This was 0.1.0 where I show you how to adhere to the SemVer principles.</p>

<p><strong>Conluding SemVer;</strong></p>
<ul>
  <li>Ensures that your version numbers convey meaningful information about your software’s changes and compatibility.</li>
  <li>Facilitates collaboration among team by providing a standardized versioning approach.</li>
</ul>

<p>Also great bootcampers have devised the following to exhibit our project’s workflow.</p>

<ul>
  <li><a href="https://cdn.discordapp.com/attachments/1138488134003335199/1154906046184292373/Black_and_Neon_Blue_Gradient_Futuristic_Cyber_Monday_Sale_Poster_1920_645_px_Desktop_Wallpaper.png">A visual content</a></li>
  <li><a href="https://cdn.discordapp.com/attachments/1138488134003335199/1155139598498939001/Screenshot_2023-09-22_205956.png">An instructional Content</a></li>
</ul>

<p>Semantic Versioning helps you and your friends understand the impact of updates at a glance.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">DEVELOPERS!</th>
      <th>You  are encouraged to follow SemVer to provide a consistent and reliable experience!</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="streamlining-terraform-cli-setup">Streamlining Terraform CLI Setup</h1>

<p>We began our journey by identifying the Linux distribution we were using, specifically Ubuntu, and determined this by inspecting the system file.</p>

<p><a href="https://www.cyberciti.biz/faq/how-to-check-os-version-in-linux-command-line/">Check your OS Version</a></p>

<p>We did it <a href="../assets/os-distru.png">just here</a>.</p>

<p>Further, the cli failed due to the following.<br />
The point of concern was this line of code:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-add-repository <span class="s2">"deb [arch=amd64] https://apt.releases.hashicorp.com </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> main"</span>
</code></pre></div></div>

<p>To enhance it, we modified it as follows:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-add-repository <span class="s2">"deb [arch=amd64] https://apt.releases.hashicorp.com </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> main"</span> <span class="nt">-y</span>
</code></pre></div></div>

<p>Next, we consulted the official Terraform documentation to acquire the correct installation instructions:</p>

<p>https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli</p>

<p>We meticulously followed these instructions one by one, resulting in successful installation.</p>

<p><a href="../assets/refactor-tf.png">See this asset</a> to observe the comparison.</p>

<p>Subsequently, we transformed these steps into a Bash script, located at  <code class="language-plaintext highlighter-rouge">./bin/here</code></p>

<h3 id="automate-the-script">Automate the Script</h3>

<p>In the context of Gitpod, we simplified the setup step within the workflow from:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">init</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">sudo apt-get update &amp;&amp; sudo apt-get install -y gnupg software-properties-common curl</span>
      <span class="s">curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add -</span>
      <span class="s">sudo apt-add-repository "deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main"</span>
      <span class="s">sudo apt-get update &amp;&amp; sudo apt-get install terraform</span>
</code></pre></div></div>

<p>To just;</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">init</span><span class="pi">:</span> <span class="pi">|</span>
     <span class="s">source ./bin/install_terraform_cli</span>
</code></pre></div></div>

<p>Furthermore, we established a solution to address the scenario where initializing occurs only when starting a new workspace:</p>

<table>
  <thead>
    <tr>
      <th>Scenario</th>
      <th>Initialization</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>When starting a new workspace</td>
      <td><code class="language-plaintext highlighter-rouge">init</code></td>
    </tr>
    <tr>
      <td>Launching an existing workspace</td>
      <td>No <code class="language-plaintext highlighter-rouge">init</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Solution;</strong></p>

<p>Use either the <code class="language-plaintext highlighter-rouge">before</code> or <code class="language-plaintext highlighter-rouge">command</code> directive as shown below:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">before</span><span class="pi">:</span> <span class="pi">|</span>
     <span class="s">source ./bin/install_terraform_cli</span>
</code></pre></div></div>

<h4 id="linux-permissions">Linux Permissions</h4>

<p>Take the file, make it executable and associate it with the current user.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>u+x ./bin/install_terraform_cli
</code></pre></div></div>

<p>Or follownig this number:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>744 ./bin/install_terraform_cli
</code></pre></div></div>

<p>Bash scripts start with shebang, learn more;
https://en.wikipedia.org/wiki/Chmod</p>

<p>Execute scripts;</p>

<p>Use the <code class="language-plaintext highlighter-rouge">./</code> shorthand notiation to execute the bash script.</p>

<p>eg. <code class="language-plaintext highlighter-rouge">./bin/install_terraform_cli</code> its included above.</p>

<blockquote>
  <p>Refer to  <a href=".gitpod.yml">.gitpod.yml</a></p>
</blockquote>

<h3 id="considerations">Considerations</h3>

<p>Create an issue <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/issues/3">#3</a> that will have the number three cause;</p>

<ul>
  <li>Our initial issue, identified as #1, was established.</li>
  <li>We initiated a Pull Request (PR) to implement the assigned task from that issue, which is now #2.</li>
  <li>Subsequently, we introduced a new issue, referenced as <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/issues/3">#3</a>, with distinct objectives.</li>
</ul>

<h1 id="effective-use-of-environment-variables">Effective Use of Environment Variables</h1>
<p>We will explore various practical use cases for environment variables, providing clear and concise instructions to enhance your understanding.</p>

<p>I commit using an emoji <code class="language-plaintext highlighter-rouge">:building_construction:</code>	from here;</p>

<p>https://github.com/ikatyang/emoji-cheat-sheet/blob/master/README.md</p>

<h3 id="listing-environment-variables">Listing Environment Variables</h3>
<p>To easily list all environment variables in your current environment, use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>env
</code></pre></div></div>

<p>If you need to filter and display environment variables containing a specific keyword, employ the grep command as follows:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>env | grep KEYWORD
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">grep</code> command is a powerful tool for data filtering.</p>

<h2 id="managing-workspace-in-gitpod">Managing Workspace in Gitpod</h2>
<p>Gitpod workspaces begin at the <code class="language-plaintext highlighter-rouge">/workspace/here</code> directory. To avoid accidentally pushing unnecessary files to your repository, follow these steps in your bash script:</p>

<ol>
  <li>Navigate to the workspace at the beginning of your script:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /workspace
</code></pre></div>    </div>
  </li>
  <li>After the installation is complete, return to your actual workspace repository:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /workspace/terraform-beginner-bootcamp
</code></pre></div>    </div>
  </li>
</ol>

<p>This approach ensures that your installation occurs in the correct location, with the CLI readily available.</p>

<h3 id="understanding-gitpod-provided-environment-variables">Understanding Gitpod-Provided Environment Variables</h3>

<p>Gitpod automatically assigns environment variables to your workspace. To access them, execute the <code class="language-plaintext highlighter-rouge">env</code> command and look for variables like <code class="language-plaintext highlighter-rouge">THEIA_WORKSPACE_ROOT</code>, which will have values like <code class="language-plaintext highlighter-rouge">/workspace/terraform-beginner-bootcamp-2023</code>.</p>

<p>You can use these variables in your scripts as shown below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $THEIA_WORKSPACE_ROOT
</code></pre></div></div>

<p>Remember</p>

<ul>
  <li>To assign an environment variable in bash, use the syntax <code class="language-plaintext highlighter-rouge">VARIABLE_NAME='value'</code>.</li>
  <li>To print the content of a specific environment variable, employ the <code class="language-plaintext highlighter-rouge">echo $env</code> format.</li>
</ul>

<h3 id="assigning-environment-variables-in-bash">Assigning Environment Variables in Bash</h3>
<p>You can manually assign environment variables within your bash script. Follow these steps:</p>

<ol>
  <li>At the top of your script, define the variable:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PROJECT_ROOT='/workspace/terraform-beginner-bootcamp-2023'
</code></pre></div>    </div>
  </li>
  <li>Use the variable as needed in your script:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $PROJECT_ROOT
</code></pre></div>    </div>
    <p>Alternatively, you can assign the variable when executing the script:</p>
  </li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PROJECT_ROOT</span><span class="o">=</span><span class="s1">'/workspace/terraform-beginner-bootcamp-2023'</span> ./bin/install_terraform_cli
</code></pre></div></div>

<p>Or export it within your environment:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PROJECT_ROOT</span><span class="o">=</span><span class="s1">'/workspace/terraform-beginner-bootcamp-2023'</span>
</code></pre></div></div>

<p>To persist this environment variable in Gitpod, utilize the gp env command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gp <span class="nb">env </span><span class="nv">PROJECT_ROOT</span><span class="o">=</span><span class="s1">'/workspace/terraform-beginner-bootcamp-2023'</span>
</code></pre></div></div>
<p>To remove the environment variable, use the unset command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">unset </span>PROJECT_ROOT
</code></pre></div></div>

<h2 id="create-dotenv">Create Dotenv</h2>

<p>For better organization, it’s recommended to centralize all environment variables in a dotenv file.</p>

<ol>
  <li>Create file in the <code class="language-plaintext highlighter-rouge">bin/</code> and name it <code class="language-plaintext highlighter-rouge">.env.sample</code>.</li>
  <li>Add your desired environment variables to it.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello I am called .env
</code></pre></div></div>

<ol>
  <li>Define your project root
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PROJECT_ROOT='/workspace/terraform-beginner-bootcamp-2023'
</code></pre></div>    </div>
  </li>
</ol>

<p>By following this approach, you can maintain a cleaner and more organized environment variable configuration in your project.</p>

<blockquote>
  <p>You have to remove the <code class="language-plaintext highlighter-rouge">.sample</code> from <code class="language-plaintext highlighter-rouge">.env</code> to make it work.</p>
</blockquote>

<h2 id="installation-of-aws-cli-for-quick-interaction">Installation of AWS CLI for Quick Interaction</h2>

<p>In our quest to communicate swiftly and efficiently with AWS CLI, we’ve devised a streamlined installation process.</p>

<p>Although we’ve already incorporated it into Gitpod, we’re now taking an extra step to ensure authentication.</p>

<p>To achieve this, we will create a bash script named <code class="language-plaintext highlighter-rouge">install_aws_cli</code> within the <code class="language-plaintext highlighter-rouge">./bin</code> directory.</p>

<p>This script will contain all the necessary commands,</p>
<ul>
  <li>Starting with the shebang declaration</li>
  <li>Integrating the existent instructional commands</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">cd</span> /workspace
curl <span class="s2">"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip"</span> <span class="nt">-o</span> <span class="s2">"awscliv2.zip"</span>
unzip awscliv2.zip
<span class="nb">sudo</span> ./aws/install
<span class="nb">cd</span> <span class="nv">$PROJECT_ROOT</span>
</code></pre></div></div>

<p>We will update the environment variable to match the one previously established in our coding section.</p>

<p>You can find more information in the <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/tree/5-project-root-environment-variable">branch five labeled</a>.</p>

<p>This is how we previously executed these commands in Gitpod:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">cd /workspace</span>
  <span class="s">curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"</span>
  <span class="s">unzip awscliv2.zip</span>
  <span class="s">sudo ./aws/install</span>
  <span class="s">cd $THEIA_WORKSPACE_ROOT</span>
</code></pre></div></div>

<p>Now, instead of duplicating this code in various places, we can simply reference our newly created script like this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">source .bin/install_aws_cli</span>
</code></pre></div></div>

<p>This approach not only simplifies our workflow but also ensures consistency and ease of maintenance.</p>

<h3 id="verifying-your-aws-cli-configuration">Verifying Your AWS CLI Configuration</h3>
<p>Before proceeding, it’s crucial to ensure that your AWS CLI is properly configured for authentication. Follow these detailed steps to confirm your setup:</p>

<ol>
  <li>Check Your AWS CLI Authentication Status
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sts get-caller-identity
</code></pre></div>    </div>
  </li>
</ol>

<p>If you see a message indicating that you are not authenticated, it’s time to address this issue.</p>

<p><img src="/assets/0.4.0/ur-not-authenticated.png" alt="Not Auth" /></p>

<h4 id="resolving-the-unauthenticated-issue">Resolving the Unauthenticated Issue</h4>

<p>To resolve the authentication issue, you have two options:</p>
<ul>
  <li>follow the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html">official AWS documentation</a></li>
  <li>or use me as your documentation.</li>
</ul>

<ol>
  <li>Manual Configuration:</li>
</ol>

<p>You can manually set your AWS CLI credentials.</p>

<p>These values provided here are for instructional purposes;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
$ export AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
$ export AWS_DEFAULT_REGION=us-west-2
</code></pre></div></div>

<p>Ensure you replace them with your actual</p>
<ul>
  <li>AWS access key</li>
  <li>Secret key</li>
  <li>Preferred AWS region</li>
</ul>

<p>Next, open your <code class="language-plaintext highlighter-rouge">.env</code> file that was created in again  <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/tree/5-project-root-environment-variable">branch five</a>.</p>

<p>Insert the following lines with your actual credentials:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># .env file

AWS_ACCESS_KEY_ID=YOUR_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_SECRET_ACCESS_KEY
AWS_DEFAULT_REGION=YOUR_PREFERRED_REGION
</code></pre></div></div>

<h3 id="3-aws-iam-user-configuration">3. AWS IAM User Configuration</h3>

<ul>
  <li>Navigate to your AWS Management Console, specifically the IAM (Identity and Access Management) section.</li>
  <li>Create a new IAM user, naming it “yourname-terraform-beginner-bootcamp”.</li>
  <li>Next, create a group of permissions and assign it to this newly created user.</li>
</ul>

<p>Inside the IAM user settings;</p>
<ul>
  <li>Access the “Security Credentials” tab.</li>
  <li>Scroll down and click “Create access key,” selecting “CLI” as the access type.</li>
  <li>Confirm the action without specifying a value for the next option.</li>
</ul>

<p>Retrieve the access key and secret access key from the previous step, and assign them to your environment variables as follows:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_DEFAULT_REGION=your_region_here
</code></pre></div></div>

<ul>
  <li>Ensure you add these variables to your CLI session using the export command:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export AWS_ACCESS_KEY_ID=your_access_key_here
export AWS_SECRET_ACCESS_KEY=your_secret_key_here
export AWS_DEFAULT_REGION=your_region_here
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="making-environment-variables-persistent-in-gitpod">Making Environment Variables Persistent in Gitpod</h4>

<p>To make these environment variables persist in your Gitpod environment, use the gp env command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gp env AWS_ACCESS_KEY_ID=your_access_key_here
gp env AWS_SECRET_ACCESS_KEY=your_secret_key_here
gp env AWS_DEFAULT_REGION=your_region_here
</code></pre></div></div>

<h4 id="security-note-do-not-leave-credentials-in-envsample"><strong>Security Note: Do Not Leave Credentials in <code class="language-plaintext highlighter-rouge">.env.sample</code></strong></h4>
<p>Ensure you do not include your actual AWS credentials in your .env.sample file. Security check to keep sensitive information like AWS keys out of version-controlled files.</p>

<h4 id="verify-aws-cli-authentication">Verify AWS CLI Authentication</h4>

<p>Now just double-check your AWS CLI authentication by running the command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sts get-caller-identity
</code></pre></div></div>

<p>If everything is correctly configured, you should receive a JSON payload similar to this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"UserId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;aws-id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Arn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::&lt;aws-id&gt;:user/yourname-in-terraform-beginner-bootcamp"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Also add that at the end of the script so you can see it on gitpod launch</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">sudo</span> ./aws/install
<span class="c"># I am Previous AWS CLI Install Instructions</span>

aws sts get-caller-identity

<span class="nb">cd</span> <span class="nv">$PROJECT_ROOT</span>
<span class="c"># I am After AWS CLI Install Instructions</span>

</code></pre></div></div>
<p>By following this, you’ll ensure that your AWS CLI is properly authenticated!</p>

<h2 id="refining-aws-cli-script">Refining AWS CLI Script</h2>
<p>While re-executing the AWS CLI installation script, you might encounter a prompt requesting user input to confirm the installation if AWS CLI components already exist.</p>

<p>To ensure a smooth installation without user intervention, we need to modify the script accordingly. Here’s a detailed guide on how to achieve this:</p>

<h3 id="1-handling-existing-aws-cli-components">1. Handling Existing AWS CLI Components</h3>
<p>The initial concern is addressing the presence of existing AWS CLI components.</p>

<p>To achieve this, we can take the following steps with a simple <code class="language-plaintext highlighter-rouge">ls</code> on the <code class="language-plaintext highlighter-rouge">workspace</code> dir.</p>

<ul>
  <li>Check if the AWS CLI zip file exists and remove it if it does.</li>
  <li>Check if the AWS CLI directory exists and remove it along with the zip file if found.</li>
</ul>

<p>To overcome this, we can add logic to remove any existing components before proceeding with the installation.</p>

<p>We got this from GPT, here is <a href="https://chat.openai.com/share/a49c1186-f867-421e-9d63-9b541e3f6677">the history</a></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Define the path to the AWS CLI zip file</span>
<span class="nv">AWS_ZIP_FILE</span><span class="o">=</span><span class="s1">'/workspace/awscliv2.zip'</span>

<span class="c"># Check if the AWS CLI zip file exists and remove it if found</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$AWS_ZIP_FILE</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">rm</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$AWS_ZIP_FILE</span><span class="s2">"</span>
<span class="k">fi</span>
</code></pre></div></div>

<p>When attempting to run the script, it remains unresponsive. We need to explore more innovative solutions to resolve this issue.</p>

<h3 id="2-assign-env-vars">2. Assign Env Vars</h3>
<p>Consider assigning it to an environment variable.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$AWS_ZIPPO='awscliv2.zip'
if [ -e "/workspace/$AWS_ZIPPO" ]; then
    rm -f "/workspace/$AWS_ZIPPO"
fi
</code></pre></div></div>

<p>Despite attempting another approach, the issue persists, and the script is still not functioning correctly.</p>

<h3 id="3-gpt-is-average">3. GPT is Average</h3>

<p>Let’s investigate Stack Overflow using the ‘dev null’ approach: 
https://stackoverflow.com/questions/31318068/how-to-write-a-shell-script-to-remove-a-file-if-it-already-exists</p>

<p>We performed a basic <code class="language-plaintext highlighter-rouge">ls</code> command to discover that the installation process created an ‘aws’ directory in addition to the zip file.</p>

<p>The straightforward solution is to delete both the directory and the zip file.</p>

<p>This can be accomplished after navigating to our workspace.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-f</span> <span class="s1">'/workspace/awscliv2.zip'</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="s1">'/workspace/aws'</span>
</code></pre></div></div>
<p>It should function smoothly.<br />
This step may seem insignificant, but it can be quite beneficial for beginners to get going. <br />I used to see this as china. Look at me now. I’m rocking.</p>

<p>Thats it for this! See u soon.</p>

<h1 id="terraform-basics">Terraform Basics</h1>

<p>We explored the fundamentals of Terraform, a powerful infrastructure as code (IaC) tool.</p>

<p>We began by navigating to the Terraform Registry at <a href="https://registry.terraform.io">https://registry.terraform.io</a> to access essential resources and modules.</p>

<p><strong>Provider vs. Module</strong>: We discussed the distinction between a provider and a module in Terraform.</p>
<ul>
  <li>Providers are responsible for managing resources</li>
  <li>While modules serve as reusable building blocks for your infrastructure.</li>
</ul>

<h3 id="goals">Goals</h3>
<p>Our primary objectives for this bootcamp include:</p>
<ul>
  <li>Creating a custom provider(which is something very hard but cool to do)</li>
  <li>Developing a module, a fundamental Terraform construct.  (normal)</li>
</ul>

<h2 id="calling-a-provider-from-registry">Calling a Provider From Registry</h2>
<p>We initiated our journey by employing the <code class="language-plaintext highlighter-rouge">random</code> provider, which enables us to generate random values.</p>

<p>You can find this provider at <a href="https://registry.terraform.io/providers/hashicorp/random/latest">hashicorp/random</a>.</p>

<h3 id="provider-and-resource-configuration">Provider and Resource Configuration</h3>

<ol>
  <li>We declared the <code class="language-plaintext highlighter-rouge">random</code> provider in our main Terraform configuration file as follows:</li>
</ol>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">terraform</span> <span class="p">{</span>
  <span class="nx">required_providers</span> <span class="p">{</span>
    <span class="nx">random</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span> <span class="p">=</span> <span class="s2">"hashicorp/random"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"3.5.1"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">provider</span> <span class="s2">"random"</span> <span class="p">{</span>
  <span class="c1"># Configuration options</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note: The <code class="language-plaintext highlighter-rouge">main.tf</code> configuration file is considered the top root module in Terraform, and we are continually building modules within it.</p>

<table>
  <thead>
    <tr>
      <th>:lamp:</th>
      <th>We are technically making modules all the time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<ol>
  <li>Resource Creation: We created a random resource named “bucket_id” put it below the provider code:
    <div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"random_id"</span> <span class="s2">"bucket_id"</span> <span class="p">{</span>
  <span class="nx">keepers</span> <span class="p">=</span> <span class="p">{</span>
 <span class="c1"># Generate a new id each time we switch to a new AMI id</span>
 <span class="nx">ami_id</span> <span class="p">=</span> <span class="kd">var</span><span class="p">.</span><span class="nx">ami_id</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>Naming Conventions: Rename the resource to “bucket_id” for clarity.</li>
  <li>Navigate to the Terraform Registry and click on the “Documentation” tab located in the left-hand side second navbar, adjacent to the “Use Provider” button.</li>
  <li>Proceed to the “Resources” section and select the desired resource. Place this chosen resource immediately below the previously mentioned one.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resource "random_id" "name" {
  keepers = {
 # Generate a new id each time we switch to a new AMI id
 ami_id = var.ami_id
  }
</code></pre></div>    </div>
  </li>
  <li>
    <p>Assign the name <code class="language-plaintext highlighter-rouge">bucket_id</code> to the resource to align it with our specific use case.</p>
  </li>
  <li>Navigate to the resource section and select the specified simple resource. Place it directly underneath the previous resource.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resource "random_id" "bucket_name" {
  keepers = {
 # Generate a new id each time we switch to a new AMI id
 ami_id = var.ami_id
  }
</code></pre></div>    </div>
  </li>
</ol>

<p>Looks Mh. I think we can try this with a random string.</p>

<h3 id="expanding-resources">Expanding Resources</h3>
<p>To enhance our resources, we added a random string generator instead.</p>

<ol>
  <li>Located the “random string” resource in the Terraform Registry, then replaced the existing resource with the following code:
    <div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"random_string"</span> <span class="s2">"bucket_name"</span> <span class="p">{</span>
  <span class="nx">length</span>           <span class="p">=</span> <span class="mi">16</span>
  <span class="nx">special</span>          <span class="p">=</span> <span class="kc">true</span>
  <span class="nx">override_special</span> <span class="p">=</span> <span class="s2">""</span>
</code></pre></div>    </div>
  </li>
  <li>from  <code class="language-plaintext highlighter-rouge">override_special =</code>  take the <code class="language-plaintext highlighter-rouge">"/@£$"</code> as we dont need.</li>
</ol>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"random_string"</span> <span class="s2">"bucket_name"</span> <span class="p">{</span>
  <span class="nx">length</span>           <span class="p">=</span> <span class="mi">16</span>
  <span class="nx">special</span>          <span class="p">=</span> <span class="kc">true</span>
  <span class="nx">override_special</span> <span class="p">=</span> <span class="s2">""</span>
<span class="p">}</span>
</code></pre></div></div>
<ol>
  <li>Or just go back to this and put special to false and just delete the <code class="language-plaintext highlighter-rouge">override_special</code> instead:</li>
</ol>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"random_string"</span> <span class="s2">"bucket_name"</span> <span class="p">{</span>
  <span class="nx">length</span>           <span class="p">=</span> <span class="mi">16</span>
  <span class="nx">special</span>          <span class="p">=</span> <span class="kc">false</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="add-outputs">Add outputs</h3>

<ol>
  <li>Add an output block to return the random string value and name it with our bucket_name
    <div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">output</span> <span class="s2">""</span> <span class="p">{}</span>
</code></pre></div>    </div>
  </li>
  <li>For the value assign it the <code class="language-plaintext highlighter-rouge">id</code> of <code class="language-plaintext highlighter-rouge">bucket_name</code> of that <code class="language-plaintext highlighter-rouge">random_string</code></li>
</ol>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">output</span> <span class="s2">"random_bucket_name"</span> <span class="p">{</span>
 <span class="nx">value</span> <span class="p">=</span> <span class="nx">random_string</span><span class="p">.</span><span class="nx">bucket_name</span><span class="p">.</span><span class="nx">id</span>
<span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>Additionally, let’s verify whether it returns a different value or remains consistent.</li>
</ol>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">output</span> <span class="s2">"random_bucket_name"</span> <span class="p">{</span>
 <span class="nx">value</span> <span class="p">=</span> <span class="nx">random_string</span><span class="p">.</span><span class="nx">bucket_name</span><span class="p">.</span><span class="nx">result</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="pre-verify">Pre-Verify</h3>

<p>Make sure the file looks like this before actually testing terraform</p>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">terraform</span> <span class="p">{</span>
  <span class="nx">required_providers</span> <span class="p">{</span>
    <span class="nx">random</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span> <span class="p">=</span> <span class="s2">"hashicorp/random"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"3.5.1"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">provider</span> <span class="s2">"random"</span> <span class="p">{</span>
  <span class="c1"># Configuration options</span>
<span class="p">}</span>

  
<span class="k">resource</span> <span class="s2">"random_string"</span> <span class="s2">"bucket_name"</span> <span class="p">{</span>
  <span class="nx">length</span>           <span class="p">=</span> <span class="mi">16</span>
  <span class="nx">special</span>          <span class="p">=</span> <span class="kc">false</span>
<span class="p">}</span>


<span class="k">output</span> <span class="s2">"random_bucket_name"</span> <span class="p">{</span>
 <span class="nx">value</span> <span class="p">=</span> <span class="nx">random_string</span><span class="p">.</span><span class="nx">bucket_name</span><span class="p">.</span><span class="nx">id</span>
<span class="p">}</span>

<span class="k">output</span> <span class="s2">"random_bucket_name"</span> <span class="p">{</span>
 <span class="nx">value</span> <span class="p">=</span> <span class="nx">random_string</span><span class="p">.</span><span class="nx">bucket_name</span><span class="p">.</span><span class="nx">result</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If so, nice lets go ahead.</p>

<h2 id="terraform-workflow">Terraform Workflow</h2>
<p>We reviewed essential Terraform commands and workflow steps.</p>

<h3 id="initialization">Initialization</h3>
<p>We executed <code class="language-plaintext highlighter-rouge">terraform init</code>, which:</p>
<ul>
  <li>Created a <code class="language-plaintext highlighter-rouge">.terraform</code> directory for Terraform configuration. (Downloaded the required provider binary)</li>
  <li>Generated a <code class="language-plaintext highlighter-rouge">terraform.lock.hcl</code> file to lock the provider version.</li>
</ul>

<p><img src="/assets/0.5.0/random-provider.png" alt="Outputs and Stuff" /></p>

<blockquote>
  <p>If you are going for the certification, I already did <a href="https://www.credly.com/badges/81d4dcaf-2e4c-4d8e-9ef1-58ef47fe77ee">a year or something ago</a>. Try to remmember the path registry.terraform.io comes a lot.</p>
</blockquote>

<h3 id="planning">Planning</h3>
<p>We ran <code class="language-plaintext highlighter-rouge">terraform plan</code> to preview the infrastructure changes.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Terraform will perform the following actions:

  <span class="c"># random_string.bucket_name will be created</span>
  + resource <span class="s2">"random_string"</span> <span class="s2">"bucket_name"</span> <span class="o">{</span>
      + <span class="nb">id</span>          <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + length      <span class="o">=</span> 16
      + lower       <span class="o">=</span> <span class="nb">true</span>
      + min_lower   <span class="o">=</span> 0
      + min_numeric <span class="o">=</span> 0
      + min_special <span class="o">=</span> 0
      + min_upper   <span class="o">=</span> 0
      + number      <span class="o">=</span> <span class="nb">true</span>
      + numeric     <span class="o">=</span> <span class="nb">true</span>
      + result      <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + special     <span class="o">=</span> <span class="nb">false</span>
      + upper       <span class="o">=</span> <span class="nb">true</span>
    <span class="o">}</span>

Plan: 1 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  + random_bucket_name_id     <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
  + random_bucket_name_result <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
</code></pre></div></div>

<h3 id="apply">Apply</h3>
<p>Using <code class="language-plaintext highlighter-rouge">terraform apply</code>, we applied the configuration, which returned the specified outputs.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Outputs:
random_bucket_name_id <span class="o">=</span> <span class="s2">"vvGZbRsNc3bkJ0Lg"</span>
random_bucket_name_result <span class="o">=</span> <span class="s2">"vvGZbRsNc3bkJ0Lg"</span>
</code></pre></div></div>

<ul>
  <li>Go ahead and delete the id line, I prefer the result. Make sure output looks like that;
    <div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">output</span> <span class="s2">"random_bucket_name_result"</span> <span class="p">{</span>
 <span class="nx">value</span> <span class="p">=</span> <span class="nx">random_string</span><span class="p">.</span><span class="nx">bucket_name</span><span class="p">.</span><span class="nx">result</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>Try terraform plan</li>
</ul>

<p>this step will referesh the state</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>random_string.bucket_name: Refreshing state... <span class="o">[</span><span class="nb">id</span><span class="o">=</span>vvGZbRsNc3bkJ0Lg]

Changes to Outputs:
  - random_bucket_name_id     <span class="o">=</span> <span class="s2">"vvGZbRsNc3bkJ0Lg"</span> -&gt; null

You can apply this plan to save these new output values to the Terraform state, without changing any real
infrastructure.
</code></pre></div></div>

<ul>
  <li>Run terraform apply as follow to not have to confirm with Yes.</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform apply <span class="nt">--auto-approve</span>
</code></pre></div></div>
<p><img src="/assets/0.5.0/auto-approve-single-random.png" alt="Auto Approve Not Always" /></p>

<p>When you run a the apply you get the <code class="language-plaintext highlighter-rouge">terraform.tfstate</code>.</p>

<p>Its ignored in our <code class="language-plaintext highlighter-rouge">.gitignore</code> but you can see it here, tell u about ur config.</p>

<p>Dont touch it pls. Only if required.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"version"</span>: 4,
  <span class="s2">"terraform_version"</span>: <span class="s2">"1.5.7"</span>,
  <span class="s2">"serial"</span>: 3,
  <span class="s2">"lineage"</span>: <span class="s2">"f275b0ef-379f-f74c-95d5-b8feac774f8c"</span>,
  <span class="s2">"outputs"</span>: <span class="o">{</span>
    <span class="s2">"random_bucket_name_result"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"vvGZbRsNc3bkJ0Lg"</span>,
      <span class="s2">"type"</span>: <span class="s2">"string"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"resources"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"mode"</span>: <span class="s2">"managed"</span>,
      <span class="s2">"type"</span>: <span class="s2">"random_string"</span>,
      <span class="s2">"name"</span>: <span class="s2">"bucket_name"</span>,
      <span class="s2">"provider"</span>: <span class="s2">"provider[</span><span class="se">\"</span><span class="s2">registry.terraform.io/hashicorp/random</span><span class="se">\"</span><span class="s2">]"</span>,
      <span class="s2">"instances"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"schema_version"</span>: 2,
          <span class="s2">"attributes"</span>: <span class="o">{</span>
            <span class="s2">"id"</span>: <span class="s2">"vvGZbRsNc3bkJ0Lg"</span>,
            <span class="s2">"keepers"</span>: null,
            <span class="s2">"length"</span>: 16,
            <span class="s2">"lower"</span>: <span class="nb">true</span>,
            <span class="s2">"min_lower"</span>: 0,
            <span class="s2">"min_numeric"</span>: 0,
            <span class="s2">"min_special"</span>: 0,
            <span class="s2">"min_upper"</span>: 0,
            <span class="s2">"number"</span>: <span class="nb">true</span>,
            <span class="s2">"numeric"</span>: <span class="nb">true</span>,
            <span class="s2">"override_special"</span>: null,
            <span class="s2">"result"</span>: <span class="s2">"vvGZbRsNc3bkJ0Lg"</span>,
            <span class="s2">"special"</span>: <span class="nb">false</span>,
            <span class="s2">"upper"</span>: <span class="nb">true</span>
          <span class="o">}</span>,
          <span class="s2">"sensitive_attributes"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"check_results"</span>: null
<span class="o">}</span>
</code></pre></div></div>

<p>You should get a single random number assigned to ur variable and you are not asked to say yes.</p>

<h3 id="output-check">Output Check</h3>
<ol>
  <li>Verify outputs using <code class="language-plaintext highlighter-rouge">terraform output</code> and specific output names.</li>
</ol>

<p>Example:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>terraform output random_bucket_name_result
<span class="s2">"vvGZbRsNc3bkJ0Lg"</span>
</code></pre></div></div>

<ol>
  <li>Try output with the name of the output e.g.</li>
</ol>

<p><img src="/assets/0.5.0/tf-output.png" alt="Outputs and Stuff" /></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform output random_bucket_name_result

<span class="s2">"vvGZbRsNc3bkJ0Lg"</span>
</code></pre></div></div>

<h3 id="important-links-to-empower-you">Important Links To Empower You</h3>
<ul>
  <li><a href="/assets/0.5.0/draft-0.5.0-real-time.txt">Noting Stuff realtime, Draft</a></li>
  <li><a href="https://chat.openai.com/share/8526b242-9920-43f2-b199-0df1700ffc3a">Remake Draft with GPT</a></li>
  <li><a href="https://chat.openai.com/share/91b1c7e4-adfd-493b-b19e-b09854a6e3bc">Write Issues and more</a></li>
</ul>

<p>This page is a direct outcome of the links I’ve just shared. See you soon! (this was done in one of the chats)</p>

<h1 id="provision-s3-using-terraform">Provision S3 Using Terraform</h1>

<p>Amazon S3 is an object storage service like Dropbox.</p>

<p>You to create a bucket and throw things in and access them in the cloud that’s all the idea of it.</p>

<h3 id="try-bucketops">Try BucketOps</h3>

<ol>
  <li>List all your S3 buckets, use the following command:</li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">ls</span>
</code></pre></div></div>
<p><img src="/assets/0.6.0/bucket-ls.png" alt="List some of my buckets" /></p>

<ol>
  <li>Create a new S3 bucket, you can use the <code class="language-plaintext highlighter-rouge">mb</code> which make bucket.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 mb s3://your-bucket-name
</code></pre></div>    </div>
    <blockquote>
      <p>We will code the above command in terraform.</p>
    </blockquote>
  </li>
</ol>

<p>3.Upload a File to an S3 Bucket,  you can use the <code class="language-plaintext highlighter-rouge">cp</code> (copy) command:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">cp</span> /path/to/local/file s3://your-bucket-name/
</code></pre></div></div>
<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">/path/to/local/file</code> with the path to the file on your local machine</li>
  <li>Replace <code class="language-plaintext highlighter-rouge">your-bucket-name</code> with the name of your S3 bucket.</li>
</ul>

<ol>
  <li>List all objects within a specific S3 bucket, use the following command
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 ls s3://your-bucket-name/
</code></pre></div>    </div>
    <p><img src="/assets/0.6.0/buck-object-ls.png" alt="List My Frontend Content From S3" /></p>
  </li>
  <li>Download an Object from an S3 Bucket with the <code class="language-plaintext highlighter-rouge">cp</code> command with reverse copying</li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">cp </span>s3://your-bucket-name/object-key /path/to/local/directory/
</code></pre></div></div>
<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">your-bucket-name</code> with the name of your S3 bucket</li>
  <li>Replace <code class="language-plaintext highlighter-rouge">object-key</code> with the key of the object you want to download</li>
  <li>Replace <code class="language-plaintext highlighter-rouge">/path/to/local/directory/</code> with the directory where you want to save the downloaded file.</li>
</ul>

<ol>
  <li>Delete an Object from an S3 Bucket use the <code class="language-plaintext highlighter-rouge">rm</code>(remove) command</li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">rm </span>s3://your-bucket-name/object-key
</code></pre></div></div>
<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">your-bucket-name</code> with the name of your S3 bucket</li>
  <li>Replace <code class="language-plaintext highlighter-rouge">object-key</code> with the key of the object you want to delete.</li>
</ul>

<p>Great and cool. 
These are some basic AWS S3 commands to get you started with managing buckets and objects using the AWS CLI.</p>

<p>Let’s now get back to terraform.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before we begin, ensure you have the following prerequisites:</p>

<ul>
  <li><a href="https://www.terraform.io/">Terraform</a> installed on your local machine.</li>
  <li>AWS credentials properly configured, either through environment variables or AWS configuration files (<code class="language-plaintext highlighter-rouge">~/.aws/credentials</code> and <code class="language-plaintext highlighter-rouge">~/.aws/config</code>).</li>
</ul>

<p>We made both of these in previous branches. Double check.</p>

<h2 id="create-an-s3-bucket-with-terraform">Create an S3 Bucket with Terraform</h2>
<p>First of all, the naming conventions between CloudFormation  and Terraform  resources may occasionally align, but this alignment is not always guaranteed. Double-check.</p>

<h3 id="searching-for-s3-in-terraform-registry">Searching for S3 in Terraform Registry</h3>

<p>To start, you need to find the AWS S3 on the Terraform Registry. You can do this by searching for ‘S3’ in the Terraform Registry.</p>

<p>You can find it <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket">here</a>. If it is that hard for you to search.</p>

<h3 id="define-the-terraform-resource">Define the Terraform Resource</h3>

<p>Now, let’s define the Terraform resource for the S3 bucket.</p>

<p>You can refer to this: <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket">The reference you’ve been told</a>.</p>

<ol>
  <li>So place this right under the random resource we did earlier;</li>
</ol>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">resource</span> <span class="s2">"aws_s3_bucket"</span> <span class="s2">"example"</span> <span class="p">{</span>
  <span class="nx">bucket</span> <span class="p">=</span> <span class="s2">"my-tf-test-bucket"</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"My bucket"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="s2">"Dev"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>Let’s temporarily remove the tags since we don’t require them at the moment.</li>
</ol>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">resource</span> <span class="s2">"aws_s3_bucket"</span> <span class="s2">"example"</span> <span class="p">{</span>
  <span class="nx">bucket</span> <span class="p">=</span> <span class="s2">"my-tf-test-bucket"</span>
<span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>
    <p>Comment it because we need to setup our AWS provider first.</p>
  </li>
  <li>
    <p>Verify by running a terraform init.</p>
  </li>
</ol>

<ul>
  <li>The failure is expected because our random bucket naming process is generating uppercase letters, which are not supported as bucket names in S3.</li>
</ul>

<ol>
  <li>Verify further plan and apply?</li>
</ol>

<blockquote>
  <p>Should fail too. We lack our AWS Provider.</p>
</blockquote>

<h3 id="configure-aws-provider">Configure AWS Provider</h3>

<p>You need to configure the AWS provider in your Terraform configuration to provide the necessary AWS credentials.</p>

<ol>
  <li>
    <p>Go to the registry and search for aws.
https://registry.terraform.io/providers/hashicorp/aws/latest</p>
  </li>
  <li>
    <p>Click  USE PROVIDER on the second navbar on the right besides Documenation;
```hcl
terraform {
  required_providers {
 aws = {
   source = “hashicorp/aws”
   version = “5.17.0”
 }
  }
}</p>
  </li>
</ol>

<p>provider “aws” {
  # Configuration options
}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
3. Reflect on our previous provider.
```tf
terraform {
  required_providers {
    random = {
      source = "hashicorp/random"
      version = "3.5.1"
    }
  }
}

provider "random" {
  # Configuration options
}
</code></pre></div></div>

<p>How are we going to add that?</p>

<p>This looks stupid. We must have a single block for each. So?</p>
<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">terraform</span> <span class="p">{</span>
  <span class="nx">required_providers</span> <span class="p">{</span>
    <span class="nx">random</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span> <span class="p">=</span> <span class="s2">"hashicorp/random"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"3.5.1"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">provider</span> <span class="s2">"random"</span> <span class="p">{</span>
  <span class="c1"># Configuration options</span>
<span class="p">}</span>

<span class="k">terraform</span> <span class="p">{</span>
  <span class="nx">required_providers</span> <span class="p">{</span>
    <span class="nx">aws</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span> <span class="p">=</span> <span class="s2">"hashicorp/aws"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"5.17.0"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">provider</span> <span class="s2">"aws"</span> <span class="p">{</span>
  <span class="c1"># Configuration options</span>
<span class="p">}</span>

</code></pre></div></div>
<ol>
  <li>Apply critical thinking and get the following results;</li>
</ol>

<div class="language-tf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">terraform</span> <span class="p">{</span>
  <span class="nx">required_providers</span> <span class="p">{</span>
    <span class="nx">random</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span> <span class="p">=</span> <span class="s2">"hashicorp/random"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"3.5.1"</span> <span class="p">}</span>

    <span class="nx">aws</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span> <span class="p">=</span> <span class="s2">"hashicorp/aws"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"5.17.0"</span>
    <span class="p">}</span>
    
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">provider</span> <span class="s2">"random"</span> <span class="p">{</span>
  <span class="c1"># Configuration options</span>
<span class="p">}</span>

<span class="k">provider</span> <span class="s2">"aws"</span> <span class="p">{</span>
  <span class="c1"># Configuration options</span>
<span class="p">}</span>
</code></pre></div></div>
<p>We had to take aws inside previous provider and put it along the random.</p>

<p>Go try plan the infra. It should fail. <br />
You added a new provider it must be mapped to your <code class="language-plaintext highlighter-rouge">.terraform</code> dotfile.</p>

<p>Init is required.</p>

<h3 id="initialize-and-plan">Initialize and Plan</h3>
<ol>
  <li>Now, you can initialize Terraform by running the following command and should work.</li>
</ol>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">terraform</span> <span class="nx">init</span>
</code></pre></div></div>

<p><img src="/assets/0.6.0/aws-provider-tf.png" alt="dotfile with bucket" /></p>

<ol>
  <li>Try running plan. Should gives ok while we both know it is not.</li>
</ol>

<p>The random is generating the name with capital while bucket only supports low letter.</p>

<ol>
  <li>Run <code class="language-plaintext highlighter-rouge">terrafom apply</code> and observe the failure.
The plan is not smart enough. Be careful. You could get a green pass and then get rejected in apply.</li>
</ol>

<p>We will address this issue next.</p>

<h3 id="fixing-bucket-naming-issue">Fixing Bucket Naming Issue</h3>

<p>To resolve the bucket naming issue, modify the resource definition as follows.</p>

<ol>
  <li>Change the bucket name from that to <code class="language-plaintext highlighter-rouge">random_string.bucket_name.result</code>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resource "aws_s3_bucket" "example" {
  bucket = random_string.bucket_name.result
}
</code></pre></div>    </div>
  </li>
</ol>

<p>Ensure you have previously defined <code class="language-plaintext highlighter-rouge">random_string.bucket_name.result</code> like I showed you.</p>

<ol>
  <li>Update the resource definition for random as required and Set length to reduce the chance of conflicts.</li>
</ol>

<p>From this;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resource "random_string" "bucket_name" {
  length           = 16
  special          = false
}
</code></pre></div></div>

<p>To that;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resource "random_string" "bucket_name" {
  lower = true
  upper = false
  length   = 32
  special  = false
}
</code></pre></div></div>

<h3 id="re-run-terraform-plan">Re-run Terraform Plan</h3>

<ol>
  <li>After fixing the issue, Run <code class="language-plaintext highlighter-rouge">terraform validate</code></li>
  <li>Or re-run Terraform plan (it does validate in the background as a bonus):
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform plan
</code></pre></div>    </div>
  </li>
</ol>

<p>This time, this also should work without errors. But we must verify further.</p>

<h3 id="terraform-apply">Terraform Apply</h3>
<p>Once you have successfully planned, apply the changes:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform apply
</code></pre></div></div>
<p>Again. Please be cautious; a successful plan does not guarantee success during the apply phase.</p>

<p>This is works you can verify from your terminal.</p>

<p><img src="/assets/0.6.0/bucket-applied.png" alt="CLI Apply Success W/ Bucket Name" /></p>

<p>You can double verify your bucket in the console.</p>

<p><img src="/assets/0.6.0/bucket-console.png" alt="Its Her from AWS" /></p>

<h3 id="double-checking-terraform-state">Double Checking Terraform State</h3>
<p>After applying the changes, check the state of Terraform with the following commands:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform show
</code></pre></div></div>

<p>You can also find it in your current directory.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">   </span><span class="p">{</span><span class="w">
      </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aws_s3_bucket"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"provider[</span><span class="se">\"</span><span class="s2">registry.terraform.io/hashicorp/aws</span><span class="se">\"</span><span class="s2">]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>The code is around 117 lines you got the point. It is now having the bucket state.</p>

<h3 id="destroying-the-bucket">Destroying the Bucket</h3>
<p>Why you may ask. Because if we push the bucket will no longer be managed by Terraform’s state file, and re-importing it may be necessary.</p>

<p>To  destroy the bucket, use the following command:</p>

<p><img src="/assets/0.6.0/bucket-destroy.png" alt="Bye bye Bucket" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform destroy
</code></pre></div></div>

<p>Double check your <code class="language-plaintext highlighter-rouge">terraform.tfstate</code></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="nl">"terraform_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.5.7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"serial"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lineage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b17f132c-59c0-f3f6-5a4a-0d2c182bf7b5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"check_results"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Yep that is all it now!</p>

<h4 id="security-reminder">Security Reminder</h4>
<p>Never commit your AWS credentials to version control. Keep your credentials secure and use proper AWS authentication methods.</p>

<ul>
  <li>It’s essential never to hard code your AWS credentials in your Terraform configuration.</li>
  <li>Rely on AWS configuration through environment variables using the <code class="language-plaintext highlighter-rouge">export</code>.</li>
</ul>

<p>Terraform will use these credentials in the background.</p>

<h1 id="migrate-to-terraform-cloud">Migrate To Terraform Cloud</h1>

<p>Terraform Cloud is a powerful tool that enables you to manage your infrastructure as code securely.</p>

<p><img src="https://developer.hashicorp.com/_next/image?url=https%3A%2F%2Fcontent.hashicorp.com%2Fapi%2Fassets%3Fproduct%3Dtutorials%26version%3Dmain%26asset%3Dpublic%252Fimg%252Fterraform%252Fcloud%252Foverview.png%26width%3D2776%26height%3D1272&amp;w=3840&amp;q=75" alt="HashiCorp Wont bother" /></p>

<p>We’ll cover setting up Terraform Cloud.<br /> You can check <a href="https://www.hashicorp.com/products/terraform/pricing">the pricing is dead cheap</a>, this equals to zero.</p>

<h3 id="prerequisites-1">Prerequisites</h3>

<p>Just get the infra on again. Remember we destroyed it previously.</p>

<p>With simple <code class="language-plaintext highlighter-rouge">terraform init</code> and <code class="language-plaintext highlighter-rouge">terraform apply</code>.</p>

<p>If you are using your local. The <code class="language-plaintext highlighter-rouge">tfdotfile</code> is sitting there. <br />You can attack <code class="language-plaintext highlighter-rouge">terraform apply</code> directly.</p>

<h2 id="why-use-remote-state-storage">Why Use Remote State Storage?</h2>
<p>The truth is we never want to responsible for that file.</p>

<p>We may lose it. Also We don’t want anyone to see it.</p>
<ul>
  <li>Eliminates the risk of losing the state file</li>
  <li>Ensures that only authorized team members can access it.</li>
</ul>

<p>Terraform is platform-agnostic you can store your state wherever.</p>
<ul>
  <li>Terraform Cloud is a recommended solution because its a sponsor.</li>
  <li>You can store it in S3 or a container in an Azure blob.</li>
</ul>

<h2 id="getting-started">Getting Started</h2>

<p>When you sign up for Terraform Cloud, you’ll be prompted to create your first organization.</p>

<p><a href="https://app.terraform.io/public/signup/account?utm_source=learn">This link will get you started</a>.</p>

<p>If you followed this, ignore the provision resource example resources. <br />I am your example..</p>

<h3 id="organizations-projects-and-workspaces">Organizations, Projects, and Workspaces?</h3>

<p>Terraform Cloud organizes your infrastructure into these three levels:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">🌐</th>
      <th>You create the project so when u create Your workspace You can specify that project..</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>🌐 Terraform Cloud Organization
├── 📁 Project 1
│   ├── 📁 Workspace 1.1
│   ├── 📁 Workspace 1.2
│   └── 📁 Workspace 1.3
└── 📁 Project 2
    ├── 📁 Workspace 2.1
    ├── 📁 Workspace 2.2
    └── 📁 Workspace 2.3
</code></pre></div></div>

<ul>
  <li><strong>Organization:</strong> The top-level entity in Terraform Cloud, which can contain multiple projects.</li>
  <li><strong>Project:</strong> A collection of related Terraform configurations.</li>
  <li><strong>Workspace:</strong> An isolated environment where Terraform configurations are applied and managed.</li>
</ul>

<h2 id="configure-workspace-settings">Configure Workspace Settings</h2>

<ol>
  <li>Create an organzation and call it e.g. <code class="language-plaintext highlighter-rouge">yayaintfcloud</code>.</li>
</ol>

<p>After creating your organization, you’ll be directed to create your first workspace and to Choose from:</p>

<ul>
  <li><strong>Version Control Workflow (Most Common)</strong>: Connect to a version control provider like GitHub.</li>
  <li><strong>CLI-Driven Workflow:</strong> Trigger Terraform runs from your local command line. (most cases and ours)</li>
  <li><strong>API Driven</strong> (more advanced)</li>
</ul>

<p>I tried the first. But its not our case for now. <br />
We want only to see stuff.</p>

<p><img src="/assets/0.7.0/create-tfcloud-org.png" alt="capture for tf success org" /></p>

<p>Go to the second. <br />Trigger remote Terraform runs from your local command line.</p>

<ol>
  <li>You will be directed to page to create ur first workspace.</li>
</ol>

<p>Pick a default project and create your workspace.</p>

<p><img src="/assets/0.7.0/default-tfcloud-workspace.png" alt="PoC workspace Cloud" /></p>

<blockquote>
  <p>Workspace names should only contain l letters, numbers, dashes, and underscores.</p>
</blockquote>

<p>Now you should have ur workspace listed.</p>

<p>In case you are confused.</p>

<p><img src="/assets/0.7.0/use-this-if-u-stuck.png" alt="Tricky just click it" /></p>

<h2 id="create-a-project">Create a Project</h2>

<ol>
  <li>From the top right corner, click “New” and select “Project” to create a new project for our bootcamp.</li>
</ol>

<p>We dont have to but lets make things in its theme.</p>

<ol>
  <li>Name our project <code class="language-plaintext highlighter-rouge">yaya-tf-bootcamp-2023</code>. This will be used next.</li>
</ol>

<h3 id="create-your-real-workspace">Create Your Real Workspace</h3>

<p>We created a default workspace. <br />Now we will go and create the one that will apply to our bootcamp.</p>

<ol>
  <li>from the left side, click create workspace and call it <code class="language-plaintext highlighter-rouge">terra-house-2023</code></li>
</ol>

<p><img src="/assets/0.7.0/tf-house-workspace.png" alt="My Terraform Cloud Is Cool" /></p>

<p>You should have your project in a good state.</p>

<ol>
  <li>Pick your project and create your workspace.</li>
</ol>

<h2 id="code-the-cloud-block">Code the Cloud Block</h2>

<p>Once your workspace is created, You will get that <a href="https://developer.hashicorp.com/terraform/tutorials/cloud/cloud-migrate">cloud block</a>.</p>

<p><img src="/assets/0.7.0/terraform-config.png" alt="PoC Terraform Cloud Config Ready" /></p>

<p>Now, let’s migrate your state to Terraform Cloud for centralized management:</p>

<ol>
  <li>Set Up Cloud Block
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cloud {
 organization = "ORGANIZATION-NAME"
 workspaces {
   name = "learn-terraform-cloud-migrate"
 }
  }
</code></pre></div>    </div>
  </li>
</ol>

<p>We thought we needed <a href="https://developer.hashicorp.com/terraform/tutorials/cloud/cloud-migrate">the remote block</a> but its using the cloud block.</p>

<p><a href="https://developer.hashicorp.com/terraform/language/settings/backends/remote">Back in the days;</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  backend "remote" {
    hostname = "app.terraform.io"
    organization = "yayaintfcloud"

    workspaces {
      name = "terra-house-2023"
</code></pre></div></div>

<p>Now it is easier for configuration;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cloud {
    organization = "yayaintfcloud"

    workspaces {
      name = "terra-house-2023"
    }
  }
</code></pre></div></div>

<p>Make sure its looks like this.</p>

<h3 id="resolved-configure-tf-cloud-with-gitpod-token">RESOLVED: Configure TF Cloud With Gitpod (Token)</h3>

<ol>
  <li>Go back to your CLI and run to authenticate with terraform cloud;
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform login
</code></pre></div>    </div>
  </li>
  <li>Confirm yes to create a file</li>
</ol>

<p>You will get a stupid screen.<br /></p>

<ol>
  <li>Click <code class="language-plaintext highlighter-rouge">p</code> for print and go to the url.</li>
</ol>

<p>This takes you to Terraform Cloud. Here is the url;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://app.terraform.io/app/settings/tokens?source=terraform-login
</code></pre></div></div>
<ol>
  <li>
    <p>Create a token and pick one for one day.</p>
  </li>
  <li>Take the token create the file yourself.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>touch /home/gitpod/.terraform.d/credentials.tfrc.json
</code></pre></div>    </div>
  </li>
  <li>Check the file structure in GPT but dont trust it.</li>
  <li><a href="https://www.reddit.com/r/Terraform/comments/rtl5ey/can_anyone_please_show_me_show_me_how/">Go to reddit</a> and get the structure instead.
    <pre><code class="language-JSON"> {
  "credentials": {
 "app.terraform.io": {
   "token": "&lt;add-it-here&gt;"
 }
  }
}
</code></pre>
  </li>
</ol>

<blockquote>
  <p>HashiCorp doesn’t even display the structure of that file. Please consider this, HashiCorp.</p>
</blockquote>

<ol>
  <li><code class="language-plaintext highlighter-rouge">Open</code> the file that you touched it.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>open  /home/gitpod/.terraform.d/credentials.tfrc.json
</code></pre></div></div>
<ol>
  <li>Add the content with the token you got from tf cloud.</li>
</ol>

<h3 id="simple-test">Simple Test</h3>

<p>To test its working.</p>

<ol>
  <li>Run <code class="language-plaintext highlighter-rouge">terraform init</code>.</li>
  <li>
    <p>Check your dotfile.</p>
  </li>
  <li>Double check your Terraform Cloud resources;</li>
</ol>

<p><img src="/assets/0.7.0/tf-cloud.png" alt="Infra State Resources" /></p>

<ol>
  <li>Triple check your outputs in Terraform Cloud;</li>
</ol>

<p><img src="/assets/0.7.0/mini-out.png" alt="Infra State Output" /></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">terraform.tfstate</code> is now included in the dotfile</li>
  <li>an environment file is created with ur tf cloud workspace.</li>
</ul>

<p><img src="/assets/0.7.0/dotfile.png" alt="dotfile took effect" /></p>

<h3 id="init-is-now-different"><code class="language-plaintext highlighter-rouge">init</code> is now different.</h3>

<ol>
  <li>Run the <code class="language-plaintext highlighter-rouge">terraform init</code> command.</li>
</ol>

<p><img src="/assets/0.7.0/apply-theme-with-tf-cloud.png" alt="Apply with tfcloud" /></p>

<p>The command returns that its dealing with terraform cloud now.</p>

<h4 id="potential-actions">Potential Actions</h4>
<ul>
  <li>Automate the process of tf login and similar steps.</li>
  <li>Explore the possibility of storing the token in Gitpod session storage</li>
  <li>Generate the necessary JSON file for the token; evaluate feasibility.</li>
  <li>Consider abbreviating the Terraform <smth></smth></li>
</ul>

<h1 id="gitpod-terraform-cloud-authentication">Gitpod Terraform Cloud Authentication</h1>

<p>As we <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/tree/18-migrate-terraform-cloud#resolved-configure-tf-cloud-with-gitpod-token">previously encountered</a>, <code class="language-plaintext highlighter-rouge">terraform login</code> is stuck.<br /></p>

<p>We found a workaround to just;</p>
<ul>
  <li>Make the file,</li>
  <li>Generate the token from terraform cloud,</li>
  <li>Add the content ourself.</li>
</ul>

<p>In this, we will make a script that do just that for us. <br />
We will then go ahead and automate it in <br />our <code class="language-plaintext highlighter-rouge">.gitpod</code> so it does it itself. <br />Every given time.</p>

<ul>
  <li><a href="#design-the-bash-script">Design the Bash Script</a></li>
  <li><a href="#get-the-token-from-terraform-cloud">Get The Token From Terraform Cloud</a></li>
  <li><a href="#automating-terraform-cloud-authentication">Automating Terraform Cloud Authentication</a></li>
</ul>

<p>We will also extend the token’s validity to 30 days for added convenience.<br />
Welcome to <code class="language-plaintext highlighter-rouge">0.8.0</code> in our week 1 of the Terraform Beginner Bootcamp.</p>

<h3 id="design-the-bash-script">Design the Bash Script</h3>

<ol>
  <li><strong>Create a file</strong> in the <code class="language-plaintext highlighter-rouge">/bin</code> directory, call it <code class="language-plaintext highlighter-rouge">gen_tfrc</code> and add the shebang:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
</code></pre></div>    </div>
    <p>This line indicates that the script should be interpreted by the Bash shell, located at <code class="language-plaintext highlighter-rouge">/usr/bin/env bash</code>.</p>
  </li>
  <li><strong>Define Target Directory and File</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">TARGET_DIR</span><span class="o">=</span><span class="s2">"/home/gitpod/.terraform.d"</span>
<span class="nv">TARGET_FILE</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">TARGET_DIR</span><span class="k">}</span><span class="s2">/credentials.tfrc.json"</span>
</code></pre></div>    </div>
    <ul>
      <li>Define the target directory (<code class="language-plaintext highlighter-rouge">/home/gitpod/.terraform.d</code>)</li>
      <li>The target file (<code class="language-plaintext highlighter-rouge">credentials.tfrc.json</code>) where the generated token will be stored.</li>
    </ul>
  </li>
  <li><strong>Check If TERRAFORM_CLOUD_TOKEN is Set</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$TERRAFORM_CLOUD_TOKEN</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
 </span><span class="nb">echo</span> <span class="s2">"Error: TERRAFORM_CLOUD_TOKEN environment variable is not set."</span>
 <span class="nb">exit </span>1
<span class="k">fi</span>
</code></pre></div>    </div>
    <p>This code checks if the environment variable <code class="language-plaintext highlighter-rouge">TERRAFORM_CLOUD_TOKEN</code> is set. If it’s not set (empty), the script will print an error message and exit with an error code (<code class="language-plaintext highlighter-rouge">1</code>).</p>
  </li>
  <li><strong>Check If Directory Exists, If Not, Create It</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
 </span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$TARGET_DIR</span><span class="s2">"</span>
<span class="k">fi</span>
</code></pre></div>    </div>
    <p>The script checks if the target directory exists and creates it if it doesn’t.</p>
  </li>
  <li><strong>Generate <code class="language-plaintext highlighter-rouge">credentials.tfrc.json</code> with the Token</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$TARGET_FILE</span><span class="s2">"</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
{
"credentials": {
 "app.terraform.io": {
 "token": "</span><span class="nv">$TERRAFORM_CLOUD_TOKEN</span><span class="sh">"
 }
}
}
</span><span class="no">EOF
</span></code></pre></div>    </div>
  </li>
</ol>

<p>This code uses the <code class="language-plaintext highlighter-rouge">cat</code> command with a “here document” (« EOF) to create the <code class="language-plaintext highlighter-rouge">credentials.tfrc.json</code> file with the Terraform Cloud token provided by the <code class="language-plaintext highlighter-rouge">TERRAFORM_CLOUD_TOKEN</code> environment variable.</p>

<ol>
  <li><strong>Print Success Message</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">TARGET_FILE</span><span class="k">}</span><span class="s2"> has been generated."</span>
</code></pre></div>    </div>
    <p>After successfully generating the <code class="language-plaintext highlighter-rouge">credentials.tfrc.json</code> file, a message confirming its generation is displayed.</p>
  </li>
  <li><strong>Setting Executable Permissions</strong>
    <ul>
      <li>Ensure proper permissions by using the <code class="language-plaintext highlighter-rouge">chmod</code> command on the Bash script.
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod u+x ./bin/gen_tfrc
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<p>Great progress! Let’s pause for a moment.</p>

<p>Before proceeding, there are a few more things we need to set up.</p>

<h3 id="get-the-token-from-terraform-cloud">Get The Token From Terraform Cloud</h3>

<ol>
  <li>Nav to the provided link to obtain a new token. If you can’t locate it there, you can always retrieve it from here.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://app.terraform.io/app/settings/tokens?source=terraform-login
</code></pre></div>    </div>
  </li>
  <li><strong>Extending Token Validity for our 4 weeks bootcamp</strong>
    <ul>
      <li>Increase the token’s lifespan to 30 days, ensuring longer usability.</li>
    </ul>
  </li>
</ol>

<p><img src="/assets/0.8.0/30d-tfcloud-token.png" alt="Increase Token Evidence" /></p>

<ol>
  <li><strong>Assigning Environment Variable for Gitpod</strong>
    <ul>
      <li>Define the variable in environment variables
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export TERRAFORM_CLOUD_TOKEN='YOURS-WITH-30-DAYS-HERE'
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Persist the environment variable to ensure it remains accessible within Gitpod.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gp env TERRAFORM_CLOUD_TOKEN='YOURS-WITH-30-DAYS-HERE'
</code></pre></div>    </div>
  </li>
</ol>

<p><img src="/assets/0.8.0/gitpod-token-presist.png" alt="Verify Gitpod UI For You" /></p>

<blockquote>
  <p>I updated the <code class="language-plaintext highlighter-rouge">.env.example</code> file with that (<a href="link here">without revealing sensitive data</a>) to teach you.</p>
</blockquote>

<ul>
  <li>We’ve extended the token’s duration.</li>
  <li>Our variables have been persistently stored.</li>
</ul>

<p>✅ Eliminating the need for frequent adjustments.</p>

<ol>
  <li><strong>Launch your gitpod and Run the Script</strong></li>
</ol>

<blockquote>
  <p>Double check if the file exist or its content to triple verify.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat: /home/gitpod/.terraform.d/credentials.tfrc.json: No such file or directory
</code></pre></div></div>
<ul>
  <li>Execute the script and view its output to confirm successful execution;
```
./bin/gen_tfrc</li>
</ul>

<p>/home/gitpod/.terraform.d/credentials.tfrc.json has been generated.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

6. `cat` or `open` the token file to verify
```sh
cat /home/gitpod/.terraform.d/credentials.tfrc.json
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cat</code> open in within your terminal.</li>
  <li><code class="language-plaintext highlighter-rouge">open</code> will open it within your code editor.</li>
</ul>

<p>Great and cool! Lets get it automated.</p>

<h2 id="automating-terraform-cloud-authentication">Automating Terraform Cloud Authentication</h2>

<p><strong>Objective: To automate the authentication of Terraform Cloud on Gitpod workspace launch.</strong></p>

<ol>
  <li><strong>Integrating the bash source to your <code class="language-plaintext highlighter-rouge">.gitpod</code></strong></li>
</ol>

<p>Navigate to your Gitpod configuration file and include the script source within the ‘terraform’ label aka section.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">terraform</span>
    <span class="na">before</span><span class="pi">:</span> <span class="pi">|</span>
     <span class="s">source ./bin/install_terraform_cli</span>
     <span class="s">source ./bin/generate_tfrc</span>
</code></pre></div></div>

<p>We thought it was necessary to include the script in both sections to ensure it functions correctly in both terminals. Including it in the ‘terraform’ section is sufficient.</p>

<table>
  <thead>
    <tr>
      <th>Resources</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/assets/0.8.0/0.8.0.txt">Secrets 100</a></td>
      <td>This is my personal draft.</td>
    </tr>
    <tr>
      <td><a href="https://chat.openai.com/share/816459f7-8838-41ad-9de7-b67fcc532cda">Secrets 101</a></td>
      <td>Make something out of my draft.</td>
    </tr>
    <tr>
      <td><a href="https://chat.openai.com/share/2fcf57c0-7e90-4e32-82e3-167f7469890b">Secrets 102</a></td>
      <td>Amplify Issues, Code, Instructions.</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/0.8.0/cat-open-inspire.png" alt="File is Here Yey!" /></p>

<p><strong>Verify by restarting your workspace to ensure that the file contains your token.</strong></p>

<h1 id="a-terraformer-tf-alias">A Terraformer <code class="language-plaintext highlighter-rouge">tf</code> Alias</h1>

<p>We’ll walk you through creating an alias for Terraform, making it more convenient to use.</p>

<p>E.g. Instead of <code class="language-plaintext highlighter-rouge">terraform init</code>, you can write just <code class="language-plaintext highlighter-rouge">tf init</code>.</p>

<ul>
  <li><a href="#section-1-manual-alias-setup">Manual Alias Setup</a></li>
  <li><a href="#section-2-automating-alias-setup-with-a-bash-script">Alias in A Bash Script</a></li>
  <li><a href="#section-3-using-the-alias-in-gitpod">Automate the Alias in Gitpod</a></li>
</ul>

<p>We’ll cover how to manually set up the alias and create a bash script to automate the process.</p>

<h3 id="section-1-manual-alias-setup">Section 1: Manual Alias Setup</h3>

<p><strong>Step 1: Accessing Your Bash Profile</strong>
To create an alias for Terraform manually, you need to edit your Bash profile.</p>

<ol>
  <li>Open your terminal and run the following command to access your Bash profile:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.bash_profile
</code></pre></div>    </div>
  </li>
  <li>This command will open your Bash profile in the Nano text editor.</li>
</ol>

<p><strong>Step 2: Adding the Terraform Alias</strong>
In the Nano text editor, navigate to the end of the file.</p>

<ol>
  <li>Add the following line to create an alias for Terraform:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">tf</span><span class="o">=</span><span class="s2">"terraform"</span>
</code></pre></div>    </div>
  </li>
  <li>Save your changes by pressing <code class="language-plaintext highlighter-rouge">Ctrl + O</code>, then press <code class="language-plaintext highlighter-rouge">Enter</code>.</li>
</ol>

<p><strong>Step 3: Updating Your Bash Profile</strong>
After adding the alias, you need to update your Bash profile. Run this command:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bash_profile
</code></pre></div></div>
<p>Now, you have successfully set up the Terraform alias manually.</p>

<h3 id="section-2-automating-alias-setup-with-a-bash-script">Section 2: Automating Alias Setup with a Bash Script</h3>

<p><strong>Step 1: Creating a Bash Script</strong>
To automate the alias setup, you can create a bash script. Here’s how:</p>

<ol>
  <li>
    <p>Create a new file for your script using the terminal or a text editor. We’ll call it <code class="language-plaintext highlighter-rouge">tf_alias</code> in <code class="language-plaintext highlighter-rouge">/bin/</code>.</p>
  </li>
  <li>Open the script file for editing:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano setup_tf_alias.sh
</code></pre></div>    </div>
  </li>
  <li>Inside the script file, add the following shebang to init the script:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
</code></pre></div>    </div>
  </li>
  <li>Check if the alias already exists in the .bash_profile</li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-q</span> <span class="s1">'alias tf="terraform"'</span> ~/.bash_profile
</code></pre></div></div>
<ol>
  <li>Add the if statement and append the the allias with the following code</li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-ne</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c"># If the alias does not exist, append it</span>
    <span class="nb">echo</span> <span class="s1">'alias tf="terraform"'</span> <span class="o">&gt;&gt;</span> ~/.bash_profile
    <span class="nb">echo</span> <span class="s2">"Alias added successfully."</span>
</code></pre></div></div>
<blockquote>
  <p>$? is a special variable in bash that holds the exit status of the last command executed</p>
</blockquote>

<ol>
  <li>Add the Else to Inform the user if the alias already exists
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">else
 </span><span class="nb">echo</span> <span class="s2">"Alias already exists in .bash_profile."</span>
<span class="k">fi</span>
</code></pre></div>    </div>
  </li>
  <li>Source the .bash_profile to make the alias available immediately
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bash_profile
</code></pre></div>    </div>
  </li>
</ol>

<p>For the sake of readability, the script does not perform line breaks.</p>

<p>I thought to update it with the following to make it so.</p>

<p><img src="/assets/0.9.0/read-clearly.png" alt="PoC no line jump" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo -e "\nalias tf=\"terraform\"" &gt;&gt; ~/.bash_profile
</code></pre></div></div>

<p>Instead of what it previously was;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo 'alias tf="terraform"' &gt;&gt; ~/.bash_profile
</code></pre></div></div>

<ol>
  <li>Save your changes by pressing <code class="language-plaintext highlighter-rouge">Ctrl + O</code>, then press <code class="language-plaintext highlighter-rouge">Enter</code>.</li>
</ol>

<p><strong>Step 2: Making the Script Executable</strong>
You need to make the script executable. Run the following command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>u+x ./bin/tf_alias
</code></pre></div></div>

<p><strong>Step 3: Executing the Script</strong>
Now, you can execute the script to add the alias to your <code class="language-plaintext highlighter-rouge">.bash_profile</code>. Run the following command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/tf_alias
</code></pre></div></div>
<p>The script will automatically add the Terraform alias to your Bash profile and update it.</p>

<h3 id="section-3-using-the-alias-in-gitpod">Section 3: Using the Alias in Gitpod</h3>

<p><strong>Step 1 : Integrating with Gitpod</strong>
If you’re using Gitpod, you can integrate the alias in both AWS and Terraform blocks to ensure it’s available in both terminals.</p>

<ol>
  <li>In your Gitpod configuration file (<code class="language-plaintext highlighter-rouge">.gitpod.yml</code>), add the following lines to both the AWS;</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">aws-cli</span>
    <span class="na">env</span><span class="pi">:</span>
      <span class="na">AWS_CLI_AUTO_PROMPT</span><span class="pi">:</span> <span class="s">on-partial</span>
    <span class="na">before</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">source ./bin/tf_alias</span>
</code></pre></div></div>

<ol>
  <li>And Terraform blocks;
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">terraform</span>
 <span class="na">before</span><span class="pi">:</span> <span class="pi">|</span>
   <span class="s">source ./bin/tf_alias</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>This wont generate double alias line. Tested.</p>

<ol>
  <li>Save the <code class="language-plaintext highlighter-rouge">.gitpod.yml</code> file.</li>
</ol>

<p>Now, every time you start a Gitpod workspace;</p>
<ul>
  <li>the alias will be automatically set up in both AWS and Terraform environments.</li>
  <li>You can now use <code class="language-plaintext highlighter-rouge">tf</code> instead of <code class="language-plaintext highlighter-rouge">terraform</code> in your commands</li>
</ul>

<ol>
  <li>Restart your workspace and observe.</li>
</ol>

<p><img src="/assets/0.9.0/terraformer.png" alt="You are A Terraformer and Transformer!" /></p>

<p>This is <code class="language-plaintext highlighter-rouge">0.9.0</code> making your Terraform workflow more efficient and user-friendly.</p>

<blockquote>
  <p><a href="/journal/week1.html">Proceed To Week One.</a></p>
</blockquote>

        </section>

        <aside id="sidebar">
          
            <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/zipball/gh-pages" class="button">
              <small>Download</small>
              .zip file
            </a>
            <a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023/tarball/gh-pages" class="button">
              <small>Download</small>
              .tar.gz file
            </a>
          

          
            <p class="repo-owner"><a href="https://github.com/yaya2devops/terraform-beginner-bootcamp-2023">terraform-beginner-bootcamp-2023</a> is maintained by <a href="https://github.com/yaya2devops">yaya2devops</a>.</p>
          

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
        </aside>
      </div>
    </div>

  </body>
</html>
